/*轮播图*/ ;
! function($) {
    var $banner = $('.banner');
    var $btnOl = $('.banner ol li');
    var $pics = $('.banner ul li');
    var $currentindex = 0;
    $pics.eq($currentindex).show().siblings().hide();
    $btnOl.eq($currentindex).addClass('active').siblings('li').removeClass('active');
    $btnOl.on('click', function() {
        $pics.eq($currentindex).show().siblings().hide();
        $btnOl.eq($currentindex).addClass('active').siblings('li').removeClass('active');
        $currentindex = $(this).index();
    });
    var $time = setInterval(function() {
        $currentindex++;
        $pics.eq($currentindex).show().siblings().hide();
        $btnOl.eq($currentindex).addClass('active').siblings('li').removeClass('active');
        if ($currentindex == 8) {
            $currentindex = -1;
        }
    }, 3000)
    $banner.on(' mouseover ', function() {
        clearInterval($time);
    })
    $banner.on('mouseout', function() {
        $time = setInterval(function() {
            $currentindex++;
            $pics.eq($currentindex).show().siblings().hide();
            $btnOl.eq($currentindex).addClass('active').siblings('li').removeClass('active');
            if ($currentindex == 8) {
                $currentindex = -1;
            }
        }, 3000)
    })
}(jQuery)



/*注册*/
;
! function($) {
    var $zcbtn = $('.zhucebtn');
    var $zhuce = $('.zhuce');
    var $zcclose = $('#zc_close');
    $zcbtn.on('click', function() {
        $zhuce.show();
    })
    $zcclose.on('click', function() {
        $zhuce.hide();
    })
}(jQuery);

/*登录*/
;
! function($) {
    var $dlbtn = $('.denglubtn');
    var $denglu = $('.denglu');
    var $dlclose = $('#dl_close');
    $dlbtn.on('click', function() {
        $denglu.show();
    })
    $dlclose.on('click', function() {
        $denglu.hide();
    })
}(jQuery);

/*注册跳转登录*/
;
! function($) {
    var $zdlbtn = $('.zdl');
    var $denglu = $('.denglu');
    var $zhuce = $('.zhuce');
    $zdlbtn.on('click', function() {
        $denglu.show();
        $zhuce.hide();

    })
}(jQuery);

/*随机数字验证码*/
;
! function($) {
    var $arr = [];
    var $numbtn = $('#btn');
    var $yzm = $('#yzm');
    var $span = $('.yzm_span');
    for (var i = 48; i <= 57; i++) {
        $arr.push(String.fromCharCode(i));
    }
    $numbtn.on('click', function() {
        var $yzm = '';
        for (var j = 0; j <= 4; j++) {
            var $result = parseInt(Math.random() * $arr.length);
            $yzm += $arr[$result];
        }
        $numbtn.text($yzm);
    })
    $yzm.on('blur', function() {
        if ($numbtn.text() == $yzm.val()) {
            $span.text('√').css("color", "green");
        } else {
            $span.text('X').css("color", "red");
        }
    })

}(jQuery);

//小效果
;
! function() {
    var $nav_sub = $('.nav_sub');
    var $nav_foot = $('.nav_foot .left li')
    $nav_foot.on('mouseover', function() {
        $nav_sub.show();
    })
    $nav_foot.on('mouseout', function() {
        $nav_sub.hide();
    })
}(jQuery)

/*主页数据*/
;
! function($) {
    var $moto_text_img = $('.moto_text_img');
    $.ajax({
        url: "http://10.31.156.25/1804/moto/php/picdata.php",
        type: "get",
        dataType: "json"
    }).done(function(data) { //如果调用php成功  
        let $str = [];
        $.each(data, function(index, value) {
            $str[index] = '<ul>'
            $.each(value, function(indexA, valueA) {
                var $arr = valueA.src.split(',');
                var $title = valueA.title.split(',')
                $str[index] +=
                    '<li><a href="http://10.31.156.25/1804/moto/src/details.html?sid=' + valueA.sid + '"><span>新品</span><img src="' + $arr[0] + '" alt=""><div class="moto_img_tex"><h3>' + $title[0] + '</h3><p>' + valueA.text + '</p><p class="price">￥' + valueA.price + '</p></div></a></li>'
            });
            $str[index] += '<ul>';
        });
        $.each($('.moto_text_img'), function(index, value) {
            $(value).html($str[index]);
        })
    });
}(jQuery)